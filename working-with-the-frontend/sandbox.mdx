---
title: "Système Sandbox"
description: "Environnement de test pour les composants globaux"
icon: "play"
---

<Info>
  La Sandbox est accessible en développement à l'adresse
  **localhost:3000/sandbox** quand le serveur Next.js est démarré.
</Info>

## À quoi sert la Sandbox ?

La Sandbox est un environnement de développement qui permet de :

<CardGroup cols={2}>
  <Card title="Tester les composants" icon="flask">
    Visualiser et tester tous nos composants globaux de manière isolée
  </Card>

<Card title="Explorer les variants" icon="palette">
  Tester tous les variants CVA et props de nos composants en temps réel
</Card>

<Card title="Générer du code" icon="code">
  Obtenir le code JSX prêt à copier-coller dans notre application
</Card>

  <Card title="Documenter" icon="book">
    Créer une documentation vivante de notre design system
  </Card>
</CardGroup>

### Exemple concret

Au lieu de créer une page temporaire pour tester notre composant `Button`, on :

1. **Ouvre** `/sandbox/button`
2. **Teste** tous les variants (primary, destructive, etc.)
3. **Copie** le code généré : `<Button variant="primary">Mon bouton</Button>`
4. **Colle** directement dans notre composant

## Comment ça marche ?

### 1. Détection automatique

La Sandbox scanne automatiquement le dossier `/shared/components/common/` et détecte tous les composants qui ont un export `meta`.

```
shared/components/common/
├── button.component.tsx     ← Détecté si export meta
├── input.component.tsx      ← Détecté si export meta
├── dialog.component.tsx     ← Détecté si export meta
└── card.component.tsx       ← Détecté si export meta

features/catalog/components/
├── catalog-card.component.tsx  ← Ignoré (pas global)
└── product-form.component.tsx  ← Ignoré (pas global)
```

### 2. Export meta obligatoire

Pour qu'un composant apparaisse dans la Sandbox, il doit avoir un export `meta` :

```tsx button.component.tsx
export function Button({ disabled, children }: ButtonProps) {
  return (
    <button
      className={cn(buttonVariants({ variant, size }))}
      disabled={disabled}
    >
      {children}
    </button>
  );
}

// Sans cet export, le composant n'apparaît PAS dans la Sandbox
export const meta = {
  category: "UI",
  name: "Button",
  description: "Composant bouton interactif",
};
```

### 3. Génération automatique des pages

Pour chaque composant détecté, la Sandbox génère :

- **Page index** : `/sandbox` - Liste tous les composants par catégorie
- **Page composant** : `/sandbox/button` - Playground interactif pour le Button

## Configuration du meta

### Propriétés obligatoires

```tsx
export const meta = {
  category: "UI", // Catégorie pour organiser
  name: "Button", // Nom affiché dans la Sandbox
  description: "Composant bouton", // Description courte
};
```

### Propriétés optionnelles

```tsx
export const meta = {
  category: "UI",
  name: "Button",
  description: "Composant bouton",

  // Optionnel : CVA variants pour détection automatique
  variants: buttonVariants,

  // Optionnel : Tags pour la recherche
  tags: ["ui", "button", "form"],

  // Optionnel : Si le composant accepte children
  hasChildren: true,

  // Optionnel : Props testables dans le playground
  props: {
    disabled: {
      type: "boolean",
      defaultValue: false,
    },
    children: {
      type: "text",
      defaultValue: "Mon bouton",
    },
  },
};
```

## Configuration des props testables

Si on veut tester des props dans le playground, on ajoute une section `props` au meta :

### Types supportés

<Tabs>
  <Tab title="Text">
    Pour les props de type string :
    
    ```tsx
    children: {
      type: "text",
      defaultValue: "Mon texte",
      description: "Texte du bouton"
    }
    ```
  </Tab>

  <Tab title="Boolean">
    Pour les props true/false :
    
    ```tsx
    disabled: {
      type: "boolean",
      defaultValue: false
    }
    ```
  </Tab>

  <Tab title="Number">
    Pour les props numériques :
    
    ```tsx
    count: {
      type: "number",
      defaultValue: 10
    }
    ```
  </Tab>
</Tabs>

## Exemple complet

```tsx input.component.tsx
const inputVariants = cva("border rounded-md px-3 py-2", {
  variants: {
    variant: {
      default: "border-gray-300",
      error: "border-red-500",
    },
  },
});

interface InputProps extends VariantProps<typeof inputVariants> {
  placeholder?: string;
  disabled?: boolean;
  maxLength?: number;
}

export function Input({
  variant,
  placeholder,
  disabled,
  maxLength,
}: InputProps) {
  return (
    <input
      className={cn(inputVariants({ variant }))}
      placeholder={placeholder}
      disabled={disabled}
      maxLength={maxLength}
    />
  );
}

// Configuration complète pour la Sandbox
export const meta = {
  category: "Form",
  name: "Input",
  description: "Champ de saisie avec validation",
  variants: inputVariants,
  tags: ["form", "input", "field"],
  hasChildren: false,
  props: {
    placeholder: {
      type: "text",
      defaultValue: "Tapez votre texte...",
    },
    disabled: {
      type: "boolean",
      defaultValue: false,
    },
    maxLength: {
      type: "number",
      defaultValue: 100,
    },
  },
};
```

## Utilisation de la Sandbox

<Steps>
  <Step title="Accéder à la liste">
    On se rend sur `/sandbox` pour voir tous nos composants organisés par catégorie
  </Step>

<Step title="Ouvrir un composant">
  On clique sur un composant pour accéder à son playground interactif
</Step>

<Step title="Tester les props">
  On modifie les contrôles dans le playground pour voir le composant changer en
  temps réel
</Step>

<Step title="Copier le code">
  On utilise le bouton "Copier le code" pour obtenir le JSX correspondant à nos
  réglages
</Step>

  <Step title="Utiliser dans l'app">
    On colle le code copié directement dans notre composant ou page
  </Step>
</Steps>

## Catégories recommandées

On organise nos composants avec ces catégories courantes :

```tsx
// Interface utilisateur
export const meta = { category: "UI", ... };        // Button, Badge, Avatar

// Formulaires
export const meta = { category: "Form", ... };      // Input, Select, Checkbox

// Mise en page
export const meta = { category: "Layout", ... };    // Card, Container, Grid

// Retours utilisateur
export const meta = { category: "Feedback", ... };  // Alert, Toast, Loading

// Navigation
export const meta = { category: "Navigation", ... }; // Menu, Breadcrumb, Tabs
```

<Note>
  La Sandbox se met à jour automatiquement quand vous modifiez un composant ou
  ajoutez de nouveaux variants CVA.
</Note>
